---
title: "Introduction to Scientific Programming and Simulation 2016"
author: "Gerhard Nachtmann"
date: "`r Sys.Date()`"
output: html_document
---

## Catching up with R: Base R

### Data structures

atomic vector (corresponding `NA`)

  + logical (`NA`)
  + integer (`NA_integer_`)
  + double (numeric) (`NA_real_`)
  + character (`NA_character_`)

list

```{r list}
vector(mode = "list", length = 3)

```


data.frame

trees


`NULL`, `NA`, `NaN`

round

paste

seq_along(letters)

seq_len(4)

gl

http://adv-r.had.co.nz/Data-structures.html

### Subsetting / Indexing

`subset()`

`[]`

`%in%`

### functions

vectorization

imperial2metric

### control structures

if

ifelse vectorized


### loops

Explicit

  + `for`
  + `while`
  

Implicit

`lapply` and friends, which are much faster
inch2cm, paste

```{r loops}
s1 <- function(x){
  res <- 0
  for(i in seq_along(x)){
    res <- res + x[i]
  }
  res
}

s2 <- function(x){
  res <- 0
  i <- 1
  while(i <= length(x)){
    res <- res + x[i]
    i <- i + 1
  }
  res
}

cs1 <- function(x){
  res <- 0
  resv <- vector(mode  = "numeric", length = length(x))
  for(i in seq_along(x)){
    res <- res + x[i]
    resv[i] <- res
  }
  resv
}


```


### aggregate

with(x, aggregate(v, by = list(group), sum))

### Your turn: own function in loop


### tidy data

http://vita.had.co.nz/papers/tidy-data.html

http://blog.rstudio.org/2014/07/22/introducing-tidyr/


### data.table

fread

data.table package extends data.frame especially for large data.
It is quite fast due to optimized code.

https://github.com/Rdatatable/data.table/wiki

Binary search in `data.table`


## Reproducible research

Make reports using [knitr](http://yihui.name/knitr).

Formatting with [RMarkdown](http://rmarkdown.rstudio.com/).

Write code and text in one document to produce final output including graphics.

Features:

+ Lists
+ emphasize font
    + **bold** (\*\*)
    + *italics* (\*)
    + ~~strikethrough~~ (\~\~)
+ Links

Links:

https://nicercode.github.io/guides/reports/

https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet

R-Chunks

+ `echo`: show code
+ `eval`: evaluate code
+ `fig`: show figure
+ insert chunk in RStudio: Ctrl+Alt+i
+ inline chunk in backticks with `r`

`purl("document.Rmd")` extracts R-code

Include `ggplot` e.g.
```{r eval = FALSE}
ggplot(iris, aes(x = Sepal.Length, y = Petal.Length, col = Petal.Width)) +
  geom_point() + geom_smooth(method = "lm") + facet_wrap(~Species)
```

